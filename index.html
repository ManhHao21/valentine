<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Valentine's Day Flip Book</title>
<link rel="stylesheet" href="./css/style.css">
</head>
<style>

</style>
<body>

  <div class="hedlinecontainer" id="hedlinecontainer" style="display: flex; flex-direction: column;"></div>
  <audio id="background-music" autoplay loop>
    <source src="sound/sound.mp3" type="audio/mp3">
    Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ ph√°t nh·∫°c.
  </audio>
  
  <div class="gallery">
  </div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    let gallery = document.querySelector('.gallery');
    let music = document.getElementById("background-music");
  
    let backgrounds = ["img/anh1.jpg", "img/valentine.jpg","img/hihi.jpg","img/huhu.jpg","img/hunhun.jpg"];
    let currentBgIndex = 0;
  
    function changeBackground() {
      document.body.style.backgroundImage = `url('${backgrounds[currentBgIndex]}')`;
      currentBgIndex = (currentBgIndex + 1) % backgrounds.length;
    }
  
    function loadGallery() {
      gallery.innerHTML = "";
      for (let i = 1; i <= 45; i++) {
        let img = document.createElement("img");
        img.src = `img/${i}.jpg`;
        img.alt = "Hun hun";
        gallery.appendChild(img);
      }
    }
  
    function startMusic() {
      document.body.addEventListener("click", function () {
        if (music.paused) {
          music.play().catch(error => console.log("Kh√¥ng th·ªÉ t·ª± ƒë·ªông ph√°t nh·∫°c:", error));
        }
      }, { once: true });
    }
  
    function showTextLoop() {
      const lines = [
        "üíñ Happy Valentine's Day c·ªßa ch√∫ng m√¨nh üíñ",
        "ü•∫ H∆°i bu·ªìn m·ªôt ch√∫t, Valentine ƒë·∫ßu ti√™n c·ªßa ch√∫ng m√¨nh m√† l·∫°i ·ªü xa nhau...",
        "üíû Nh∆∞ng m√† kh√¥ng sao, anh v·∫´n ·ªü ƒë√¢y v·ªõi em m√†! Hehe, y√™u em nhi·ªÅu l·∫Øm, c·ª•c v√†ng c·ªßa anh!",
        "üíù Ch√∫c em m·ªôt ng√†y Valentine tr√†n ƒë·∫ßy ni·ªÅm vui v√† h·∫°nh ph√∫c nh√©! üíù"
      ];
  
      const container = document.getElementById("hedlinecontainer");
      container.innerHTML = ""; // X√≥a n·ªôi dung c≈© tr∆∞·ªõc khi hi·ªÉn th·ªã l·∫°i
  
      function showLine(index) {
        if (index >= lines.length) {
          setTimeout(() => {
            showTextLoop(); // Khi h·∫øt d√≤ng, l·∫∑p l·∫°i to√†n b·ªô
          }, 2000);
          return;
        }
  
        const lineDiv = document.createElement("div");
        lineDiv.classList.add("fade-in-line");
        container.appendChild(lineDiv);
  
        const words = lines[index].split(" ");
        let wordIndex = 0;
  
        function showWord() {
          if (wordIndex < words.length) {
            lineDiv.innerHTML += words[wordIndex] + " ";
            wordIndex++;
            setTimeout(showWord, 200); // Hi·ªán t·ª´ng t·ª´ sau 200ms
          } else {
            setTimeout(() => showLine(index + 1), 1000); // Ch·ªù 1 gi√¢y tr∆∞·ªõc khi hi·ªÉn th·ªã d√≤ng ti·∫øp theo
          }
        }
  
        showWord(); // B·∫Øt ƒë·∫ßu hi·ªÉn th·ªã t·ª´ ƒë·∫ßu ti√™n c·ªßa d√≤ng hi·ªán t·∫°i
      }
  
      showLine(0); // B·∫Øt ƒë·∫ßu t·ª´ d√≤ng ƒë·∫ßu ti√™n
    }
  
    function startLoop() {
      loadGallery();
      showTextLoop();
    }
  
    startMusic();
    startLoop();
  
    // Thay ƒë·ªïi background m·ªói 10 gi√¢y
    changeBackground();
    setInterval(changeBackground, 10000);
  });
  </script>
  
  <!-- Link Font ch·ªØ ƒë·∫πp -->
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500&display=swap" rel="stylesheet">
</body>
</html>