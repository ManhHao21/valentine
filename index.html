<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Valentine's Day Flip Book</title>
<link rel="stylesheet" href="./css/style.css">
</head>

<body>

  <div class="hedlinecontainer" id="hedlinecontainer" style="display: flex; flex-direction: column;"></div>
  <audio id="background-music" autoplay loop>
    <source src="sound/sound.mp3" type="audio/mp3">
    Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ ph√°t nh·∫°c.
  </audio>
  
  <div class="gallery">
  </div>
  <div id="videoContainer">
    <button onclick="toggleVideo()">Xem Video üé•</button>
    <video id="myVideo" controls style="display: none; margin-top: 10px;">
        <source src="video.mp4" type="video/mp4">
        Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ video.
    </video>
</div>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    let gallery = document.querySelector('.gallery');
    let music = document.getElementById("background-music");
    let videoContainer = document.getElementById("videoContainer");
    let videoPlayer = document.getElementById("myVideo");
    let textContainer = document.getElementById("hedlinecontainer");

    let backgrounds = ["img/anh1.jpg", "img/valentine.jpg","img/hihi.jpg","img/huhu.jpg","img/hunhun.jpg"];
    let currentBgIndex = 0;

    function changeBackground() {
      document.body.style.backgroundImage = `url('${backgrounds[currentBgIndex]}')`;
      currentBgIndex = (currentBgIndex + 1) % backgrounds.length;
    }

    function loadGallery() {
      gallery.innerHTML = "";
      for (let i = 1; i <= 45; i++) {
        let img = document.createElement("img");
        img.src = `img/${i}.jpg`;
        img.alt = "Hun hun";
        gallery.appendChild(img);
      }
    }
    music.play().catch(error => console.log("Kh√¥ng th·ªÉ t·ª± ƒë·ªông ph√°t nh·∫°c:", error));
    function showTextLoop() {
      const lines = [
        "üíñ Happy Valentine's Day c·ªßa ch√∫ng m√¨nh üíñ",
        "ü•∫ H∆°i bu·ªìn m·ªôt ch√∫t, Valentine ƒë·∫ßu ti√™n c·ªßa ch√∫ng m√¨nh m√† l·∫°i ·ªü xa nhau...",
        "üíû Nh∆∞ng m√† kh√¥ng sao, anh v·∫´n ·ªü ƒë√¢y v·ªõi em m√†! Hehe, y√™u em nhi·ªÅu l·∫Øm, c·ª•c v√†ng c·ªßa anh!",
        "üíù Ch√∫c em m·ªôt ng√†y Valentine tr√†n ƒë·∫ßy ni·ªÅm vui v√† h·∫°nh ph√∫c nh√©! üíù"
      ];

      textContainer.innerHTML = ""; // X√≥a n·ªôi dung c≈©

      function showLine(index) {
        if (index >= lines.length) return;
        const lineDiv = document.createElement("div");
        lineDiv.classList.add("fade-in-line");
        textContainer.appendChild(lineDiv);
        const words = lines[index].split(" ");
        let wordIndex = 0;

        function showWord() {
          if (wordIndex < words.length) {
            lineDiv.innerHTML += words[wordIndex] + " ";
            wordIndex++;
            setTimeout(showWord, 200);
          } else {
            setTimeout(() => showLine(index + 1), 1000);
          }
        }

        showWord();
      }

      showLine(0);
    }

    function startLoop() {
      loadGallery();
      showTextLoop();
    }

    startMusic();
    startLoop();

    setInterval(changeBackground, 10000);

    // ‚úÖ Khi click v√†o button, t·∫Øt nh·∫°c, ·∫©n ·∫£nh, ·∫©n text v√† hi·ªÉn th·ªã danh s√°ch video
    function toggleVideo() {
      music.pause(); // T·∫Øt nh·∫°c
      music.currentTime = 0;

      gallery.style.display = "none"; // ·∫®n ·∫£nh
      textContainer.style.display = "none"; // ·∫®n text

      videoContainer.innerHTML = "<h2>Danh s√°ch Video üé•</h2>"; // Ti√™u ƒë·ªÅ danh s√°ch video

      for (let i = 1; i <= 15; i++) {
        let videoItem = document.createElement("video");
        videoItem.src = `video/${i}.mp4`;
        videoItem.controls = true;
        videoItem.style.width = "80%";
        videoItem.style.margin = "10px auto";
        videoContainer.appendChild(videoItem);
      }
    }

    document.querySelector("button").addEventListener("click", toggleVideo);
  });
</script>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500&display=swap" rel="stylesheet">
</body>
</html>